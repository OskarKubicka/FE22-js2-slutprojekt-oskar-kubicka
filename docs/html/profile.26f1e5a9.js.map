{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-f22bdd6042e1cd34.js","src/modules/profile.ts","node_modules/@parcel/runtime-js/lib/runtime-142388b33e60b17f.js","node_modules/@parcel/runtime-js/lib/runtime-2e74a8761f04ac73.js","node_modules/@parcel/runtime-js/lib/runtime-05ccb8047e3233d8.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"4k6MD\\\":\\\"profile.26f1e5a9.js\\\",\\\"98rEQ\\\":\\\"Asset2.531f19a3.png\\\",\\\"1bQjt\\\":\\\"Asset3.9c3a8e9d.png\\\",\\\"ST812\\\":\\\"Asset4.faead686.png\\\"}\"));","import { Data } from \"./type.ts\"\r\n\r\n\r\n//för användaren\r\nconst img1profile: HTMLImageElement = document.createElement('img')\r\nconst imgUrl1Profile = new URL('../img/Asset2.png', import.meta.url);\r\nimg1profile.src = imgUrl1Profile.href;\r\nconst img2profile: HTMLImageElement = document.createElement('img')\r\nconst imgUrl2Profile = new URL('../img/Asset3.png', import.meta.url);\r\nimg2profile.src = imgUrl2Profile.href;\r\nconst img3profile: HTMLImageElement = document.createElement('img')\r\nconst imgUrl3Profile = new URL('../img/Asset4.png', import.meta.url);\r\nimg3profile.src = imgUrl3Profile.href;\r\n\r\n\r\nconst listOfUsers: HTMLElement | null = document.querySelector('#list-of-users');\r\nconst myProfile: HTMLElement | null = document.querySelector('#my-profile');\r\nconst statusForm: HTMLElement | null = document.querySelector('#status-form');\r\nconst deleteBtn: HTMLButtonElement | null = document.querySelector('#delete')\r\nconst logOutBtn: HTMLButtonElement | null = document.querySelector('#log-out')\r\nconst title: HTMLButtonElement | null = document.querySelector('#title')\r\nconst comments: HTMLButtonElement | null = document.querySelector('#comments')\r\n\r\nconst urlProfile: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users.json`\r\nasync function getUsersForProfile(): Promise<Data[]> {\r\n    const response = await fetch(urlProfile);\r\n    const data = await response.json();\r\n    return data\r\n}\r\n\r\ngetUsersForProfile().then(showUsers)\r\n\r\nfunction showUsers(data: Data[]): void {\r\n    \r\n\r\n    data.forEach((element, index) => {\r\n       \r\n        const { username, url, status, counter } = element\r\n      \r\n        if (listOfUsers) {\r\n            const card: HTMLElement = document.createElement('div');\r\n            listOfUsers.append(card);\r\n            //profilanvändarens del\r\n            if (username == localStorage.getItem('user') && myProfile) {\r\n\r\n                card.style.display = \"none\"\r\n                const h1UsernameUser: HTMLElement | null = document.createElement('h1')\r\n                h1UsernameUser.innerText = \"Välkommen \" + username\r\n\r\n                if (title) {\r\n                    title.append(h1UsernameUser)\r\n                    if (url == \"url-1\") title.append(img1profile)\r\n                    if (url == \"url-2\") title.append(img2profile)\r\n                    if (url == \"url-3\") title.append(img3profile)\r\n\r\n                }\r\n                \r\n                if (Object.keys(element.status).length > 0 && counter) {\r\n                    for (let i = 0; i < Object.keys(element.status).length; i++) {\r\n                    \r\n                        if (i != 0) {\r\n                            const pStatusUser: HTMLElement | null = document.createElement('p')\r\n                            pStatusUser.innerText = element.status[i] + ' Likes: ' + counter[i]\r\n                           \r\n                            pStatusUser.style.padding = \"20px\"\r\n                            if (comments) {\r\n                                comments.append(pStatusUser)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                //put new status\r\n                if (statusForm) {\r\n                    statusForm.addEventListener('submit', (event) => {\r\n\r\n                        event.preventDefault()\r\n                    \r\n                        const target: HTMLElement = event.target as HTMLElement;\r\n                        if (target[0].value != \"\") {\r\n                            const newStatus: string = target[0].value\r\n                            \r\n                            let objToPut: object = {\r\n\r\n                            }\r\n                        \r\n                            let objToPutForCount: object = {\r\n\r\n                            }\r\n                            if (counter) {\r\n                                if (Object.keys(element.status).length > 0) {\r\n                                   \r\n                                    let placeToPutNewStatus: number = Object.keys(element.status).length\r\n                                 \r\n                                    objToPut[placeToPutNewStatus] = newStatus\r\n                                    objToPutForCount[placeToPutNewStatus] = 0\r\n                                    for (let i = 0; i < Object.keys(element.status).length; i++) {\r\n                                      \r\n\r\n                                        objToPut[i] = element.status[i]\r\n                                        objToPutForCount[i] = counter[i]\r\n                                    }\r\n                                }\r\n                                else objToPut[0] = newStatus; objToPutForCount[0] = counter[0]\r\n                            }\r\n                            putStatus(objToPut, index)\r\n                            setTimeout(() => {\r\n                                putCounter(objToPutForCount, index)\r\n                            }, 600)\r\n                            setTimeout(() => {\r\n                                target[0].value = '';\r\n                                location.reload();\r\n                            }, 1000)\r\n                        }\r\n                    })\r\n\r\n                }\r\n                ///delete user\r\n                if (deleteBtn) {\r\n                    deleteBtn.addEventListener('click', () => {\r\n                        \r\n                        async function deleteStatus(index: number) {\r\n                            const urlDelete: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users/${index}.json`\r\n                            const init: Object = {\r\n                                method: 'DELETE',\r\n                                headers: {\r\n                                    'Content-type': \"application/json;charset=UTF-8\"\r\n                                }\r\n                            };\r\n                            const response = await fetch(urlDelete, init);\r\n                            const data = await response.json();\r\n                        }\r\n                        if (data.length == 1) {\r\n                            let objZero: object = {\r\n                                users: \"\"\r\n                            }\r\n                            deleteStatus(index)\r\n                            setTimeout(() => {\r\n\r\n\r\n                                putFirebase()\r\n                                async function putFirebase(): Promise<void> {\r\n                                    const urlPutZero: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/.json`\r\n                                    const init: Object = {\r\n                                        method: 'PUT',\r\n                                        body: JSON.stringify(objZero),\r\n                                        headers: {\r\n                                            'Content-type': \"application/json;charset=UTF-8\"\r\n                                        }\r\n                                    };\r\n                                    const response = await fetch(urlPutZero, init);\r\n                                    const data = await response.json();\r\n\r\n                                }\r\n\r\n\r\n                            }, 1000)\r\n                            setTimeout(() => {\r\n                                location.reload();\r\n                                window.location.assign(\"../index.html\")\r\n                            }, 2000)\r\n\r\n                        }\r\n                        else {\r\n                            if (index == data.length - 1) {\r\n                                deleteStatus(index)\r\n                                \r\n                                setTimeout(() => {\r\n                                    location.reload();\r\n                                    window.location.assign(\"../index.html\")\r\n                                }, 500)\r\n                            }\r\n                            else {\r\n                                deleteStatus(index)\r\n                                setTimeout(() => {\r\n                                    getUsersAfterDelete().then(newUserList)\r\n                                    setTimeout(() => {\r\n                                        location.reload();\r\n                                        window.location.assign(\"../index.html\")\r\n                                    }, 500)\r\n                                }, 500)\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            //listan på användare\r\n            card.addEventListener('click', () => {\r\n                \r\n                localStorage.setItem('differentUser', username)\r\n                window.location.assign(\"./userpage.html\")\r\n            })\r\n            const h1Username: HTMLElement | null = document.createElement('h1')\r\n            h1Username.innerText = username\r\n            card.append(h1Username)\r\n\r\n\r\n            card.style.backgroundColor = \"hsla(30, 80%, 50%, 1)\"\r\n            card.style.borderRadius = \"10px\"\r\n            card.style.textAlign = \"center\"\r\n            card.style.padding = \"8px 11px\"\r\n            card.style.fontFamily = \"Rationale, sans-serif;\"\r\n            card.style.margin = \"10px\"\r\n            card.style.fontSize = \"x-small\"\r\n            card.style.border = \"#b2501d solid 15px\"\r\n            card.onmouseover = function () {\r\n                card.style.cursor = \"pointer\"\r\n            }\r\n        }\r\n    })\r\n\r\n\r\n}\r\n\r\n//puta in status\r\nasync function putStatus(objStatus: object, index: number): Promise<void> {\r\n    const urlPutStatus: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users/${index}/status.json`\r\n    const init: Object = {\r\n        method: 'PUT',\r\n        body: JSON.stringify(objStatus),\r\n        headers: {\r\n            'Content-type': \"application/json;charset=UTF-8\"\r\n        }\r\n    };\r\n    const response = await fetch(urlPutStatus, init);\r\n    const data = await response.json();\r\n\r\n}\r\nasync function putCounter(objToPutForCount: object, index: number): Promise<void> {\r\n    const urlPutStatus: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users/${index}/counter.json`\r\n    const init: Object = {\r\n        method: 'PUT',\r\n        body: JSON.stringify(objToPutForCount),\r\n        headers: {\r\n            'Content-type': \"application/json;charset=UTF-8\"\r\n        }\r\n    };\r\n    const response = await fetch(urlPutStatus, init);\r\n    const data = await response.json();\r\n\r\n}\r\n//after delete\r\nasync function getUsersAfterDelete(): Promise<[Data | null]> {\r\n    const url: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users.json`\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    \r\n    return data\r\n}\r\nfunction newUserList(data: [Data | null]): void {\r\n \r\n\r\n    data.splice(data.indexOf(null), 1)\r\n\r\n\r\n    putNewArr(data)\r\n    async function putNewArr(dataPut: [Data | null]): Promise<void> {\r\n        const urlPutAll: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users.json`\r\n        const init: Object = {\r\n            method: 'PUT',\r\n            body: JSON.stringify(dataPut),\r\n            headers: {\r\n                'Content-type': \"application/json;charset=UTF-8\"\r\n            }\r\n        };\r\n        const response = await fetch(urlPutAll, init);\r\n        const data = await response.json();\r\n\r\n    }\r\n}\r\nif (logOutBtn) {\r\n    logOutBtn.addEventListener('click', () => {\r\n        localStorage.setItem('user', '')\r\n\r\n        window.location.assign(\"../index.html\")\r\n    })\r\n}\r\n","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"98rEQ\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"1bQjt\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"ST812\")).toString();"],"names":["$877624b6c2eacb75$export$6503ec6e8aabbaf","$877624b6c2eacb75$export$f7ad0328861e2f03","$877624b6c2eacb75$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$6a53988e8c8e17cd$var$img1profile","document","createElement","$e5bc418aab1d7b4b$exports","URL","resolve","url","toString","$6a53988e8c8e17cd$var$imgUrl1Profile","src","href","$6a53988e8c8e17cd$var$img2profile","$131558d0d078decc$exports","$6a53988e8c8e17cd$var$imgUrl2Profile","$6a53988e8c8e17cd$var$img3profile","$9f12702141fa1cf9$exports","$6a53988e8c8e17cd$var$imgUrl3Profile","$6a53988e8c8e17cd$var$listOfUsers","querySelector","$6a53988e8c8e17cd$var$myProfile","$6a53988e8c8e17cd$var$statusForm","$6a53988e8c8e17cd$var$deleteBtn","$6a53988e8c8e17cd$var$logOutBtn","$6a53988e8c8e17cd$var$title","$6a53988e8c8e17cd$var$comments","$6a53988e8c8e17cd$var$newUserList","data","splice","indexOf","async","dataPut","init","method","body","stringify","headers","response","fetch","json","putNewArr","$6a53988e8c8e17cd$var$getUsersForProfile","then","forEach","element","index","username","status","counter","card","append","localStorage","getItem","style","display","h1UsernameUser","innerText","pStatusUser","padding","addEventListener","event","preventDefault","target","value","newStatus","objToPut","objToPutForCount","placeToPutNewStatus","objStatus","urlPutStatus","$6a53988e8c8e17cd$var$putStatus","setTimeout","$6a53988e8c8e17cd$var$putCounter","location","reload","deleteStatus","urlDelete","objZero","users","putFirebase","window","assign","$6a53988e8c8e17cd$var$getUsersAfterDelete","setItem","h1Username","backgroundColor","borderRadius","textAlign","fontFamily","margin","fontSize","border","onmouseover","cursor"],"version":3,"file":"profile.26f1e5a9.js.map"}