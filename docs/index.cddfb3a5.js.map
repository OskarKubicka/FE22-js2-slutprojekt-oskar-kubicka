{"mappings":"imBAsBA,IAAAA,EACAC,E,iFArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,GAElC,EAaAL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,CACT,C,ICpBAE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,gMCGzD,MAAMC,EAAiCC,SAASC,eAAe,eACzDC,EAAgCF,SAASC,eAAe,YACxDE,EAA8BH,SAASC,eAAe,aACtDG,EAA8BJ,SAASC,eAAe,aACtDI,EAA8BL,SAASC,eAAe,aACtDK,EAAiCN,SAASC,eAAe,cAC3DK,GAAYA,EAAWC,iBAAiB,SAAS,KAC7CR,GAAcG,IACdH,EAAWS,MAAMC,QAAU,OAC3BV,EAAWS,MAAME,SAAU,SAC3BJ,EAAWE,MAAMC,QAAS,OAC1BP,EAAUM,MAAMC,QAAU,OAC9B,I,MCfJE,EAAiB,IAAAC,IAAoBjB,EAAA,SAAAkB,QAA6C,qBAAAC,KAAUC,W,MCA5FC,EAAiB,IAAAJ,IAAoBjB,EAAA,SAAAkB,QAA6C,qBAAAC,KAAUC,W,MFkB5F,GGlBAE,EAAiB,IAAAL,IAAoBjB,EAAA,SAAAkB,QAA6C,qBAAAC,KAAUC,WHkBxFhB,GAAcI,GAAWC,GAAWC,EAAS,CAC7C,MAAMa,EAAyBlB,SAASmB,cAAc,OACtDhB,EAAQiB,OAAOF,GACf,MAAMG,EAAA,IAAAT,IAAAD,GACNO,EAAKI,IAAMD,EAAQE,KACnBL,EAAKM,aAAa,QAAS,OAC3B,MAAMC,EAAyBzB,SAASmB,cAAc,OACtDf,EAAQgB,OAAOK,GACf,MAAMC,EAAA,IAAAd,IAAAI,GACNS,EAAKH,IAAMI,EAAQH,KACnBE,EAAKD,aAAa,QAAS,OAC3B,MAAMG,EAAyB3B,SAASmB,cAAc,OACtDd,EAAQe,OAAOO,GACf,MAAMC,EAAA,IAAAhB,IAAAK,GACNU,EAAKL,IAAMM,EAAQL,KACnBI,EAAKH,aAAa,QAAS,MAC/B,CAIAK,eAAeC,IACX,MAAMC,QAAiBC,MAHP,2FAMhB,aAFmBD,EAASE,MAGhC,CAGAH,IAAWI,MAGX,SAAoBC,GAGhB,IAAIC,EAAoBD,EAAK5C,OAG7B,MAAM8C,EAAoB,GACP,GAAfF,EAAK5C,QACL4C,EAAKG,SAAQC,IAETF,EAAQG,KAAKD,EAAQE,SAAQ,IAKjC1C,GACAA,EAAWQ,iBAAiB,UAAUmC,IAClCA,EAAMC,iBAEN,MAAMC,EAAsBF,EAAME,OAClC,GAAIA,EAAQ,CAGR,MAAMC,EAAmBD,EAAO,GAAGE,MAC7BC,EAAmBH,EAAO,GAAGE,MACnC,IAAIE,EAAiB,GACjBJ,EAAO,GAAGK,UACVD,EAASJ,EAAO,GAAGE,OAEnBF,EAAO,GAAGK,UACVD,EAASJ,EAAO,GAAGE,OAEnBF,EAAO,GAAGK,UACVD,EAASJ,EAAO,GAAGE,OAIvB,IAAII,EAAkB,CAClBT,SAAUI,EACVE,SAAUA,EACVI,OAAQ,CAAC,GACTrC,IAAKkC,EACLI,QAAS,CAAC,IAIVP,IAEkC,GAA9BR,EAAQgB,SAASR,KAqBzChB,eAAuByB,EAAaC,GAChC,MAAMC,EAAiB,sFAAsFD,SACvGE,EAAe,CACjBC,OAAQ,MACRC,KAAM9D,KAAK+D,UAAUN,GACrBO,QAAS,CACL,eAAgB,mCAGlB9B,QAAiBC,MAAMwB,EAAQC,SAClB1B,EAASE,MAEhC,CAhCwB6B,CAAQZ,EAASd,GAEjB2B,YAAW,KAEPC,SAASC,QAAM,GAChB,MAGHC,MAAM,+CAKlB,IAIZ,IAmBApC,IAAWI,MAEX,SAAeC,GAGX,MAAME,EAAoB,GACpB8B,EAAoB,GACP,GAAfhC,EAAK5C,QACL4C,EAAKG,SAAQC,IACTF,EAAQG,KAAKD,EAAQE,UACrB0B,EAAQ3B,KAAKD,EAAQQ,SAAQ,IAKjC7C,GACAA,EAAUK,iBAAiB,UAAUmC,IACjCA,EAAMC,iBAEN,MAAMC,EAAsBF,EAAME,OAClC,GAAIA,EAAQ,CAGR,IAAIC,EAAWD,EAAO,GAAGE,MACrBsB,EAAWxB,EAAO,GAAGE,MAErBD,IAEkC,GAA9BR,EAAQgB,SAASR,GAEbuB,GAAYD,EAAQ9B,EAAQgC,QAAQxB,KAEpCyB,aAAaC,QAAQ,OAAQ1B,GAE7B2B,OAAOR,SAASS,OAAO,wBAEtBP,MAAM,gBAGXA,MAAM,yBAGlB,IAGZ","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-7cbb0fc57cd67911.js","src/modules/index.ts","node_modules/@parcel/runtime-js/lib/runtime-8dd5a16c3bad9ea7.js","node_modules/@parcel/runtime-js/lib/runtime-f8212cb793154c58.js","node_modules/@parcel/runtime-js/lib/runtime-8ba700dd964c8259.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"kD17M\\\":\\\"index.cddfb3a5.js\\\",\\\"98rEQ\\\":\\\"Asset2.531f19a3.png\\\",\\\"1bQjt\\\":\\\"Asset3.9c3a8e9d.png\\\",\\\"ST812\\\":\\\"Asset4.faead686.png\\\"}\"));","import { Data } from \"./type.ts\"\r\n\r\n\r\nconst formCreate: HTMLElement | null = document.getElementById('create-form')\r\nconst formLogIn: HTMLElement | null = document.getElementById('logga-in')\r\nconst img1div: HTMLElement | null = document.getElementById('img-1-div')\r\nconst img2div: HTMLElement | null = document.getElementById('img-2-div')\r\nconst img3div: HTMLElement | null = document.getElementById('img-3-div')\r\nconst newAccount: HTMLElement | null = document.getElementById('nytt-konto');\r\nif (newAccount) newAccount.addEventListener('click', () => {\r\n    if (formCreate && formLogIn) {\r\n        formCreate.style.display = \"flex\"\r\n        formCreate.style.flexFlow= \"column\";\r\n        newAccount.style.display =\"none\"\r\n        formLogIn.style.display = \"none\"\r\n    }\r\n})\r\n\r\nif (formCreate && img1div && img2div && img3div) {\r\n    const img1: HTMLImageElement = document.createElement('img')\r\n    img1div.append(img1)\r\n    const imgUrl1 = new URL('../img/Asset2.png', import.meta.url);\r\n    img1.src = imgUrl1.href;\r\n    img1.setAttribute(\"class\", \"img\")\r\n    const img2: HTMLImageElement = document.createElement('img')\r\n    img2div.append(img2)\r\n    const imgUrl2 = new URL('../img/Asset3.png', import.meta.url);\r\n    img2.src = imgUrl2.href;\r\n    img2.setAttribute(\"class\", \"img\")\r\n    const img3: HTMLImageElement = document.createElement('img')\r\n    img3div.append(img3)\r\n    const imgUrl3 = new URL('../img/Asset4.png', import.meta.url);\r\n    img3.src = imgUrl3.href;\r\n    img3.setAttribute(\"class\", \"img\")\r\n}\r\n////fetch\r\nconst url: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users.json`\r\n\r\nasync function getUsers(): Promise<Data[]> {\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    \r\n    return data\r\n}\r\n\r\n\r\ngetUsers().then(createUser)\r\n\r\n\r\nfunction createUser(data: Data[]): void {\r\n    //längden på arrayen för att se vilken plats ny användare ska in på\r\n\r\n    let lengthUse: number = data.length\r\n\r\n    ///jämför om användaren redan finns\r\n    const nameArr: string[] = [];\r\n    if (data.length != 0) {\r\n        data.forEach(element => {\r\n\r\n            nameArr.push(element.username)\r\n        })\r\n    }\r\n\r\n\r\n    if (formCreate) {\r\n        formCreate.addEventListener('submit', event => {\r\n            event.preventDefault();\r\n\r\n            const target: HTMLElement = event.target as HTMLElement;\r\n            if (target) {\r\n               \r\n\r\n                const userName: string = target[0].value\r\n                const password: string = target[1].value\r\n                let imgUrl: string = ''\r\n                if (target[2].checked) {\r\n                    imgUrl = target[2].value\r\n                }\r\n                if (target[3].checked) {\r\n                    imgUrl = target[3].value\r\n                }\r\n                if (target[4].checked) {\r\n                    imgUrl = target[4].value\r\n                }\r\n\r\n\r\n                let newUser: Object = {\r\n                    username: userName,\r\n                    password: password,\r\n                    status: [0],\r\n                    url: imgUrl,\r\n                    counter: [0]\r\n                }\r\n\r\n\r\n                if (userName) {\r\n\r\n                    if (nameArr.includes(userName) == false) {\r\n                        putUser(newUser, lengthUse)\r\n\r\n                        setTimeout(() => {\r\n\r\n                            location.reload();\r\n                        }, 300)\r\n                    }\r\n                    else {\r\n                        alert('Det finns redan en användare med det namnet')\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n        )\r\n    }\r\n}\r\n\r\n//skapa användare\r\nasync function putUser(obj: object, index: number) {\r\n    const urlPut: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users/${index}.json`\r\n    const init: Object = {\r\n        method: 'PUT',\r\n        body: JSON.stringify(obj),\r\n        headers: {\r\n            'Content-type': \"application/json;charset=UTF-8\"\r\n        }\r\n    };\r\n    const response = await fetch(urlPut, init);\r\n    const data = await response.json();\r\n\r\n}\r\n\r\n//logga in\r\n\r\ngetUsers().then(logIn)\r\n\r\nfunction logIn(data: Data[]): void {\r\n\r\n    ///jämför om användaren redan finns\r\n    const nameArr: string[] = [];\r\n    const passArr: string[] = [];\r\n    if (data.length != 0) {\r\n        data.forEach(element => {\r\n            nameArr.push(element.username)\r\n            passArr.push(element.password)\r\n        })\r\n    }\r\n  \r\n\r\n    if (formLogIn) {\r\n        formLogIn.addEventListener('submit', event => {\r\n            event.preventDefault();\r\n\r\n            const target: HTMLElement = event.target as HTMLElement;\r\n            if (target) {\r\n\r\n                \r\n                let userName = target[0].value\r\n                let passWord = target[1].value\r\n\r\n                if (userName) {\r\n\r\n                    if (nameArr.includes(userName) == true) {\r\n                     \r\n                        if (passWord == passArr[nameArr.indexOf(userName)]) {\r\n                           \r\n                            localStorage.setItem('user', userName)\r\n\r\n                            window.location.assign(\"./html/profile.html\")\r\n                        }\r\n                        else alert('fel lösenord')\r\n                    }\r\n                    else {\r\n                        alert('användaren finns inte')\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"98rEQ\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"1bQjt\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"ST812\")).toString();"],"names":["$877624b6c2eacb75$export$6503ec6e8aabbaf","$877624b6c2eacb75$export$f7ad0328861e2f03","$877624b6c2eacb75$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$88aa17fd818eb7ff$var$formCreate","document","getElementById","$88aa17fd818eb7ff$var$formLogIn","$88aa17fd818eb7ff$var$img1div","$88aa17fd818eb7ff$var$img2div","$88aa17fd818eb7ff$var$img3div","$88aa17fd818eb7ff$var$newAccount","addEventListener","style","display","flexFlow","$9fb05da310ac5e38$exports","URL","resolve","url","toString","$4ee529f93bd02dd7$exports","$53e83e5bdd853adb$exports","img1","createElement","append","imgUrl1","src","href","setAttribute","img2","imgUrl2","img3","imgUrl3","async","$88aa17fd818eb7ff$var$getUsers","response","fetch","json","then","data","lengthUse","nameArr","forEach","element","push","username","event","preventDefault","target","userName","value","password","imgUrl","checked","newUser","status","counter","includes","obj","index","urlPut","init","method","body","stringify","headers","$88aa17fd818eb7ff$var$putUser","setTimeout","location","reload","alert","passArr","passWord","indexOf","localStorage","setItem","window","assign"],"version":3,"file":"index.cddfb3a5.js.map"}