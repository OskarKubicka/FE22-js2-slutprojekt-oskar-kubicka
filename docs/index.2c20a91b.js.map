{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-e295e30f64c4cd99.js","src/modules/index.ts","node_modules/@parcel/runtime-js/lib/runtime-95990fa683195a7f.js","node_modules/@parcel/runtime-js/lib/runtime-515b222f4b4531f1.js","node_modules/@parcel/runtime-js/lib/runtime-69de2736eb40abd5.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"hJZZS\\\":\\\"index.2c20a91b.js\\\",\\\"lI3C5\\\":\\\"Asset2.531f19a3.png\\\",\\\"g3Ncb\\\":\\\"Asset3.9c3a8e9d.png\\\",\\\"exZvY\\\":\\\"Asset4.faead686.png\\\"}\"));","import { Data } from \"./type.ts\"\r\n\r\n\r\nconst formCreate: HTMLElement | null = document.getElementById('create-form')\r\nconst formLogIn: HTMLElement | null = document.getElementById('logga-in')\r\nconst img1div: HTMLElement | null = document.getElementById('img-1-div')\r\nconst img2div: HTMLElement | null = document.getElementById('img-2-div')\r\nconst img3div: HTMLElement | null = document.getElementById('img-3-div')\r\nconst newAccount: HTMLElement | null = document.getElementById('nytt-konto');\r\nif (newAccount) newAccount.addEventListener('click', () => {\r\n    if (formCreate && formLogIn) {\r\n        formCreate.style.display = \"flex\"\r\n        formCreate.style.flexFlow= \"column\";\r\n        newAccount.style.display =\"none\"\r\n        formLogIn.style.display = \"none\"\r\n    }\r\n})\r\n\r\nif (formCreate && img1div && img2div && img3div) {\r\n    const img1: HTMLImageElement = document.createElement('img')\r\n    img1div.append(img1)\r\n    const imgUrl1 = new URL('../img/Asset2.png', import.meta.url);\r\n    img1.src = imgUrl1.href;\r\n    img1.setAttribute(\"class\", \"img\")\r\n    const img2: HTMLImageElement = document.createElement('img')\r\n    img2div.append(img2)\r\n    const imgUrl2 = new URL('../img/Asset3.png', import.meta.url);\r\n    img2.src = imgUrl2.href;\r\n    img2.setAttribute(\"class\", \"img\")\r\n    const img3: HTMLImageElement = document.createElement('img')\r\n    img3div.append(img3)\r\n    const imgUrl3 = new URL('../img/Asset4.png', import.meta.url);\r\n    img3.src = imgUrl3.href;\r\n    img3.setAttribute(\"class\", \"img\")\r\n}\r\n////fetch\r\nconst url: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users.json`\r\n\r\nasync function getUsers(): Promise<Data[]> {\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    \r\n    return data\r\n}\r\n\r\n\r\ngetUsers().then(createUser)\r\n\r\n\r\nfunction createUser(data: Data[]): void {\r\n    //längden på arrayen för att se vilken plats ny användare ska in på\r\n\r\n    let lengthUse: number = data.length\r\n\r\n    ///jämför om användaren redan finns\r\n    const nameArr: string[] = [];\r\n    if (data.length != 0) {\r\n        data.forEach(element => {\r\n\r\n            nameArr.push(element.username)\r\n        })\r\n    }\r\n\r\n\r\n    if (formCreate) {\r\n        formCreate.addEventListener('submit', event => {\r\n            event.preventDefault();\r\n\r\n            const target: HTMLElement = event.target as HTMLElement;\r\n            if (target) {\r\n               \r\n\r\n                const userName: string = target[0].value\r\n                const password: string = target[1].value\r\n                let imgUrl: string = ''\r\n                if (target[2].checked) {\r\n                    imgUrl = target[2].value\r\n                }\r\n                if (target[3].checked) {\r\n                    imgUrl = target[3].value\r\n                }\r\n                if (target[4].checked) {\r\n                    imgUrl = target[4].value\r\n                }\r\n\r\n\r\n                let newUser: Object = {\r\n                    username: userName,\r\n                    password: password,\r\n                    status: [0],\r\n                    url: imgUrl,\r\n                    counter: [0]\r\n                }\r\n\r\n\r\n                if (userName) {\r\n\r\n                    if (nameArr.includes(userName) == false) {\r\n                        putUser(newUser, lengthUse)\r\n\r\n                        setTimeout(() => {\r\n\r\n                            location.reload();\r\n                        }, 300)\r\n                    }\r\n                    else {\r\n                        alert('Det finns redan en användare med det namnet')\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n        )\r\n    }\r\n}\r\n\r\n//skapa användare\r\nasync function putUser(obj: object, index: number) {\r\n    const urlPut: string = `https://slutprojekt-js2-oskar-default-rtdb.europe-west1.firebasedatabase.app/users/${index}.json`\r\n    const init: Object = {\r\n        method: 'PUT',\r\n        body: JSON.stringify(obj),\r\n        headers: {\r\n            'Content-type': \"application/json;charset=UTF-8\"\r\n        }\r\n    };\r\n    const response = await fetch(urlPut, init);\r\n    const data = await response.json();\r\n\r\n}\r\n\r\n//logga in\r\n\r\ngetUsers().then(logIn)\r\n\r\nfunction logIn(data: Data[]): void {\r\n\r\n    ///jämför om användaren redan finns\r\n    const nameArr: string[] = [];\r\n    const passArr: string[] = [];\r\n    if (data.length != 0) {\r\n        data.forEach(element => {\r\n            nameArr.push(element.username)\r\n            passArr.push(element.password)\r\n        })\r\n    }\r\n  \r\n\r\n    if (formLogIn) {\r\n        formLogIn.addEventListener('submit', event => {\r\n            event.preventDefault();\r\n\r\n            const target: HTMLElement = event.target as HTMLElement;\r\n            if (target) {\r\n\r\n                \r\n                let userName = target[0].value\r\n                let passWord = target[1].value\r\n\r\n                if (userName) {\r\n\r\n                    if (nameArr.includes(userName) == true) {\r\n                     \r\n                        if (passWord == passArr[nameArr.indexOf(userName)]) {\r\n                           \r\n                            localStorage.setItem('user', userName)\r\n\r\n                            window.location.assign(\"./html/profile.html\")\r\n                        }\r\n                        else alert('fel lösenord')\r\n                    }\r\n                    else {\r\n                        alert('användaren finns inte')\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\n","module.exports = require('./helpers/bundle-url').getBundleURL('hJZZS') + require('./helpers/bundle-manifest').resolve(\"lI3C5\");","module.exports = require('./helpers/bundle-url').getBundleURL('hJZZS') + require('./helpers/bundle-manifest').resolve(\"g3Ncb\");","module.exports = require('./helpers/bundle-url').getBundleURL('hJZZS') + require('./helpers/bundle-manifest').resolve(\"exZvY\");"],"names":["$2e0a21b61e813383$export$6503ec6e8aabbaf","$2e0a21b61e813383$export$f7ad0328861e2f03","$2e0a21b61e813383$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$bf0bbbd1c3caa4fd$export$bdfd709ae4826697","$bf0bbbd1c3caa4fd$var$bundleURL","$bf0bbbd1c3caa4fd$var$getBaseURL","url","replace","value","err","matches","stack","match","$bf0bbbd1c3caa4fd$var$getBundleURL","parcelRequire","register","JSON","parse","$218d3716cb1b8ccb$var$formCreate","document","getElementById","$218d3716cb1b8ccb$var$formLogIn","$218d3716cb1b8ccb$var$img1div","$218d3716cb1b8ccb$var$img2div","$218d3716cb1b8ccb$var$img3div","$218d3716cb1b8ccb$var$newAccount","addEventListener","style","display","flexFlow","$a8cd15faf73c7419$exports","getBundleURL","resolve","$8d45821894b4ad49$exports","$1a718c93b183459a$exports","img1","createElement","append","imgUrl1","URL","src","href","setAttribute","img2","imgUrl2","img3","imgUrl3","async","$218d3716cb1b8ccb$var$getUsers","response","fetch","json","then","data","lengthUse","nameArr","forEach","element","push","username","event","preventDefault","target","userName","password","imgUrl","checked","newUser","status","counter","includes","obj","index","urlPut","init","method","body","stringify","headers","$218d3716cb1b8ccb$var$putUser","setTimeout","location","reload","alert","passArr","passWord","indexOf","localStorage","setItem","window","assign"],"version":3,"file":"index.2c20a91b.js.map"}